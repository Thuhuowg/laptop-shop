<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home | Laptop-Shoppe</title>
    <link href="/fe/css/bootstrap.min.css" rel="stylesheet">
    <link href="/fe/css/font-awesome.min.css" rel="stylesheet">
    <link href="/fe/css/prettyPhoto.css" rel="stylesheet">
    <link href="/fe/css/price-range.css" rel="stylesheet">
    <link href="/fe/css/animate.css" rel="stylesheet">
    <link href="/fe/css/sweetalert.css" rel="stylesheet">
    <link href="/fe/css/main.css" rel="stylesheet">
    <link href="/fe/css/responsive.css" rel="stylesheet">
</head>
<body>
<header id="header">
    <div class="header-middle">
        <div class="container">
            <div class="row">
                <div class="col-sm-4">
                    <div class="logo pull-left">
                        <a href="/"><img src="/fe/images/logolaptop.png" alt="Logo Laptop-Shoppe" /></a>
                    </div>
                </div>
                <div class="col-sm-8">
                    <div class="shop-menu pull-right">
                        <ul class="nav navbar-nav">
                            <li>
                                <form id="search-form" class="search-bar">
                                    <input type="text" id="search-input" class="search-input" placeholder="Tìm kiếm...">
                                </form>
                            </li>
                            <li>
                                <a href="tel:+84123456789">
                                    <i class="fa fa-phone"></i> +84 123 456 789
                                </a>
                            </li>
                            <li>
                                <a href="/cart">
                                    <i class="fa fa-shopping-cart"></i> Giỏ hàng
                                    <span id="cart-count" class="badge">0</span>
                                </a>
                            </li>
                            <li>
                                <a href="#" id="auth-link">Đăng nhập</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Bổ sung đoạn script phía dưới -->
<script>
    function initializeHeader() {
        // Function to delete a cookie by name
        function deleteCookie(name) {
            document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
        }

        // Function to check if a token exists
        function getToken() {
            const cookieString = document.cookie.split('; ').find(row => row.startsWith('token='));
            return cookieString ? cookieString.split('=')[1] : null;
        }

        // Function to handle logout
        function handleLogout() {
            deleteCookie('token');
            updateAuthLink();
        }

        // Function to update the auth link based on token presence
        function updateAuthLink() {
            const authLink = document.getElementById('auth-link');
            if (!authLink) {
                console.error("Element with ID 'auth-link' not found in DOM.");
                return;
            }

            const token = getToken();
            if (token) {
                authLink.textContent = 'Đăng xuất';
                authLink.href = '#'; // No page navigation for logout
                authLink.addEventListener('click', function () {
                    handleLogout();
                });
            } else {
                authLink.textContent = 'Đăng nhập';
                authLink.href = '/fe/login/login.html';
                authLink.removeEventListener('click', handleLogout);
            }
        }

        // Call the function to update the link
        updateAuthLink();
    }

    // Ensure the function runs after header.html is loaded into the DOM
    document.addEventListener('DOMContentLoaded', initializeHeader);
</script>
</body>
</html>
